# Refined_RAG_Project â€” Claude Code Project Instructions

> This file is read by Claude Code when working in this project directory.

## Project Overview
A company called Refined have lots of data on SAP HANA

## Tech Stack
<!-- List the technologies used -->
- Python 3.12
- PostgreSQL 16
- Docker Compose

## Coding Standards
- Create standalone classes in separate files under `src/`.
- Write unit tests under `tests/` for every new class.
- All tests run via `docker compose` â€” never on the host:
  ```bash
  docker compose run --rm app python -m pytest tests/
  ```
- For DB schema changes, create SQL files in `database/init/` with sequential numbering.

## Git & PR Workflow (MANDATORY)

Every task MUST end with a Pull Request. Follow these steps:

### 1. Branch
```bash
git checkout -b feat/<short-description>
```

### 2. Commit
```bash
git add -A
git commit -m "feat: <description of changes>"
```
Use conventional commits: `feat:`, `fix:`, `docs:`, `chore:`, `refactor:`, `test:`.

### 3. Push & Create PR
```bash
git push -u origin HEAD

# Create PR via ClawBoard GitHub API (DO NOT use gh CLI)
REPO=$(git remote get-url origin | sed 's|.*github.com[:/]||;s|\.git$||')
BRANCH=$(git rev-parse --abbrev-ref HEAD)
curl -sf -X POST http://localhost:8100/api/github/pr \
  -H 'Content-Type: application/json' \
  -d '{"repo":"'"$REPO"'","head":"'"$BRANCH"'","base":"main","title":"<type>: <title>","body":"## Summary\n<describe changes>\n\nðŸ¤– Generated by Claude Code via OpenClaw"}'
```
The API returns JSON with `number` and `html_url` of the created PR.

### Important Notes
- **DO NOT use `gh` CLI** â€” always use the `curl` command above to create PRs
- The GitHub API runs at `http://localhost:8100/api/github/pr`
- Always push to a **new branch**, never directly to `main`
- Always include "Generated by Claude Code via OpenClaw" in PR body

## How to Run
```bash
# Start all services
docker compose up -d --build

# Run tests
docker compose run --rm app python -m pytest tests/ -v

# View logs
docker compose logs -f app

# Stop
docker compose down
```

## Environment
- Copy `.env.example` to `.env` and fill in values.
- Never commit `.env` with real secrets.
